<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Editor Bio Link - Clyque.bio</title>
    <link rel="stylesheet" href="assets/css/dashboard.css">
    <link rel="stylesheet" href="assets/css/biolink-editor.css">
    <!-- Estilos para os modais -->
    <style>
        /* Overlay do modal */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }

        /* Estilo do modal */
        .modal {
            display: none;
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            width: 90%;
            max-width: 500px;
            max-height: 90vh;
            overflow-y: auto;
        }

        /* Cabe√ßalho do modal */
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px;
            border-bottom: 1px solid #eee;
        }

        .modal-header h3 {
            margin: 0;
            color: var(--primary-color);
        }

        .close-modal {
            background: none;
            border: none;
            font-size: 18px;
            cursor: pointer;
            color: #666;
        }

        /* Corpo do modal */
        .modal-body {
            padding: 10px;
        }

        /* Estilos do formul√°rio */
        .form-group {
            margin-bottom: 6px;
        }

        .form-group label {
            display: block;
            margin-bottom: 2px;
            font-weight: 500;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 6px;
            border: 1px solid #ddd;
            border-radius: 3px;
            font-size: 13px;
        }

        .form-group textarea {
            resize: vertical;
        }

        /* Bot√µes do formul√°rio */
        .form-actions {
            display: flex;
            justify-content: flex-end;
            gap: 6px;
            margin-top: 10px;
        }

        .cancel-button, .save-button {
            padding: 6px 12px;
            border-radius: 3px;
        }

        .cancel-button {
            background-color: #f5f5f5;
            color: #333;
            border: 1px solid #ddd;
            cursor: pointer;
        }

        .save-button {
            background-color: var(--primary-color);
            color: white;
            border: none;
            cursor: pointer;
        }

        /* Preview de imagem */
        .image-preview {
            margin-top: 10px;
            max-width: 100%;
            height: 150px;
            border: 1px dashed #ddd;
            display: flex;
            justify-content: center;
            align-items: center;
            background-color: #f9f9f9;
        }

        .image-preview img {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
        }

        /* Preview de link */
        .link-preview {
            margin-top: 6px;
            padding: 6px;
            border: 1px dashed #ddd;
            background-color: #f9f9f9;
            border-radius: 3px;
            text-align: center;
        }

        .preview-link {
            display: inline-block;
            background-color: #3F51B5;
            color: white;
            text-align: center;
            padding: 8px 16px;
            border-radius: 4px;
            text-decoration: none;
            font-weight: 500;
            width: 80%;
        }

        /* Preview de texto */
        .text-preview {
            margin-top: 6px;
            padding: 6px;
            border: 1px dashed #ddd;
            background-color: #f9f9f9;
            border-radius: 3px;
            min-height: 40px;
        }

        .text-preview p {
            margin: 0;
            color: #000000;
            text-align: center;
        }

        /* Estilos para os blocos no preview */
        .bio-link {
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: #673AB7;
            color: white;
            text-align: center;
            padding: 10px 15px;
            margin: 0;
            border-radius: 8px;
            text-decoration: none;
            font-weight: 500;
            transition: all 0.2s ease;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
            gap: 8px;
        }

        .bio-link:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.3);
        }

        .bio-link i, 
        .bio-link .emoji-icon {
            font-size: 16px;
            margin-right: 2px;
        }

        .bio-image {
            width: 100%;
            margin: 0;
            border-radius: 3px;
            overflow: hidden;
        }

        .bio-image img {
            width: 100%;
            display: block;
        }

        .bio-text {
            margin: 0;
            padding: 0 2px;
        }

        /* Estilos para os controles de edi√ß√£o dos blocos */
        .block-controls {
            display: flex;
            justify-content: center;
            gap: 1px;
            margin-top: 0;
            opacity: 0;
            transition: opacity 0.2s ease;
        }

        .bio-link-wrapper:hover .block-controls,
        .bio-image-wrapper:hover .block-controls,
        .bio-text-wrapper:hover .block-controls {
            opacity: 1;
        }

        .bio-link-wrapper,
        .bio-image-wrapper,
        .bio-text-wrapper {
            position: relative;
            margin: 0;
            padding-bottom: 2px;
        }

        .edit-block,
        .delete-block {
            background-color: #fff;
            border: 1px solid #ddd;
            border-radius: 2px;
            padding: 1px 3px;
            font-size: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 1px;
            z-index: 10;
        }

        .edit-block {
            color: #3F51B5;
        }

        .edit-block:hover {
            background-color: #3F51B5;
            color: white;
            border-color: #3F51B5;
        }

        .delete-block {
            color: #f44336;
        }

        .delete-block:hover {
            background-color: #f44336;
            color: white;
            border-color: #f44336;
        }

        /* Estilos para o seletor de emojis */
        .emoji-selector {
            display: flex;
            flex-wrap: wrap;
            gap: 2px;
            margin-bottom: 4px;
            max-height: 80px;
            overflow-y: auto;
            padding: 2px;
            background-color: #f9f9f9;
            border: 1px solid #eee;
            border-radius: 2px;
        }

        .emoji-button {
            background-color: #ffffff;
            border: 1px solid #ddd;
            border-radius: 2px;
            padding: 2px 3px;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.2s ease;
            min-width: 24px;
            min-height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .emoji-button:hover {
            background-color: #e0e0e0;
            transform: scale(1.1);
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .emoji-help {
            display: block;
            color: #666;
            font-size: 9px;
            margin-top: 1px;
            font-style: italic;
        }

        .bio-content {
            padding: 2px 4px;
        }

        /* Estilos para o arrastar e soltar */
        .dragging {
            opacity: 0.5;
        }

        .drop-indicator {
            height: 2px;
            background-color: #ff3b30;
            margin: 0;
            display: none;
        }

        .drag-handle {
            cursor: grab;
            opacity: 0;
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            width: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            color: #666;
        }

        .bio-link-wrapper:hover .drag-handle,
        .bio-image-wrapper:hover .drag-handle,
        .bio-text-wrapper:hover .drag-handle {
            opacity: 1;
        }

        .dragging .drag-handle {
            cursor: grabbing;
        }

        /* Estilos para o modal de redes sociais */
        .social-networks-container {
            display: flex;
            flex-direction: column;
            gap: 12px;
            max-height: 250px;
            overflow-y: auto;
            padding: 10px;
            margin-bottom: 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
            background-color: #f0f0f0;
        }

        .social-network-item {
            display: grid;
            grid-template-columns: auto auto 1fr;
            grid-template-rows: auto auto;
            gap: 8px 12px;
            padding: 12px;
            border-radius: 6px;
            background-color: #fff;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            transition: all 0.2s ease;
            border-left: 3px solid #ddd;
            align-items: center;
        }

        .social-network-item:hover {
            box-shadow: 0 2px 5px rgba(0,0,0,0.15);
            background-color: #f9f9f9;
            border-left-color: var(--primary-color, #3F51B5);
        }

        /* Estilo personalizado para os checkboxes */
        .social-network-item input[type="checkbox"] {
            appearance: none;
            -webkit-appearance: none;
            width: 18px;
            height: 18px;
            border: 2px solid #bbb;
            border-radius: 3px;
            outline: none;
            cursor: pointer;
            position: relative;
            background-color: #f5f5f5;
            margin: 0;
            grid-column: 1;
            grid-row: 1;
            justify-self: center;
        }

        .social-network-item input[type="checkbox"]:checked {
            background-color: var(--primary-color, #3F51B5);
            border-color: var(--primary-color, #3F51B5);
        }

        .social-network-item input[type="checkbox"]:checked::after {
            content: '‚úì';
            position: absolute;
            color: white;
            font-size: 14px;
            font-weight: bold;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }

        .social-network-item input[type="checkbox"]:hover {
            border-color: var(--primary-color, #3F51B5);
        }

        .social-network-item .checkbox-label {
            display: flex;
            align-items: center;
            margin: 0;
            grid-column: 3;
            grid-row: 1;
            font-weight: 500;
            cursor: pointer;
            color: #333;
            font-size: 14px;
        }

        .social-network-item:hover .checkbox-label {
            color: var(--primary-color, #3F51B5);
        }

        .social-network-item i {
            font-size: 20px;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: #f0f0f0;
            border-radius: 50%;
            grid-column: 2;
            grid-row: 1;
            justify-self: center;
        }
        
        /* Estilo para os √≠cones das redes sociais */
        .social-network-item .fab.fa-instagram { color: #E1306C; }
        .social-network-item .fab.fa-facebook { color: #1877F2; }
        .social-network-item .fab.fa-twitter { color: #1DA1F2; }
        .social-network-item .fab.fa-youtube { color: #FF0000; }
        .social-network-item .fab.fa-tiktok { color: #000000; }
        .social-network-item .fab.fa-linkedin { color: #0A66C2; }
        .social-network-item .fab.fa-whatsapp { color: #25D366; }
        .social-network-item .fab.fa-telegram { color: #0088cc; }

        .social-url {
            grid-column: 1 / 4;
            grid-row: 2;
            padding: 8px 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 13px;
            width: 100%;
            display: none;
            transition: all 0.2s ease;
        }

        .social-url:focus {
            border-color: var(--primary-color);
            outline: none;
            box-shadow: 0 0 0 2px rgba(63, 81, 181, 0.2);
        }

        .social-preview {
            margin-top: 10px;
            padding: 10px;
            border: 1px dashed #ddd;
            background-color: #f9f9f9;
            border-radius: 3px;
            min-height: 60px;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .social-icons-preview {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            justify-content: center;
        }

        .social-icon {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 40px;
            height: 40px;
            border-radius: 8px;
            color: white;
            font-size: 20px;
            transition: all 0.2s ease;
        }

        .social-icon:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }

        .social-icon.rounded {
            border-radius: 8px;
        }

        .social-icon.square {
            border-radius: 2px;
        }

        .social-icon.circle {
            border-radius: 50%;
        }

        .social-icon.small {
            width: 30px;
            height: 30px;
            font-size: 16px;
        }

        .social-icon.medium {
            width: 40px;
            height: 40px;
            font-size: 20px;
        }

        .social-icon.large {
            width: 50px;
            height: 50px;
            font-size: 24px;
        }

        /* Cores das redes sociais */
        .social-icon.instagram { background: linear-gradient(45deg, #405DE6, #5851DB, #833AB4, #C13584, #E1306C, #FD1D1D); }
        .social-icon.facebook { background-color: #1877F2; }
        .social-icon.twitter { background-color: #1DA1F2; }
        .social-icon.youtube { background-color: #FF0000; }
        .social-icon.tiktok { background-color: #000000; }
        .social-icon.linkedin { background-color: #0A66C2; }
        .social-icon.whatsapp { background-color: #25D366; }
        .social-icon.telegram { background-color: #0088cc; }

        /* Estilos para o bloco de redes sociais no preview */
        .bio-social-wrapper {
            margin: 10px 0;
        }

        .bio-social {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            justify-content: center;
            padding: 5px;
        }

        .hidden {
            display: none;
        }

        .social-network-item input[type="checkbox"]:checked ~ .social-url {
            display: block;
        }

        /* Estilo para itens com checkbox marcado */
        .social-network-item input[type="checkbox"]:checked ~ .checkbox-label {
            color: var(--primary-color, #3F51B5);
            font-weight: 600;
        }
        
        .social-network-item input[type="checkbox"]:checked + i {
            background-color: #e8eaff;
            transform: scale(1.1);
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
    </style>
    <!-- Font Awesome para √≠cones -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <!-- Sidebar -->
    <aside class="sidebar">
        <div class="logo">
            <h1>clyque<span>.bio</span></h1>
        </div>
        <nav class="menu">
            <ul>
                <li>
                    <a href="dashboard.html"><i class="fas fa-home"></i> <span>Dashboard</span></a>
                </li>
                <li class="active">
                    <a href="#"><i class="fas fa-layer-group"></i> <span>Bio Links</span></a>
                </li>
                <li>
                    <a href="#"><i class="fas fa-link"></i> <span>Links Curtos</span></a>
                </li>
                <li>
                    <a href="#"><i class="fas fa-qrcode"></i> <span>QR Codes</span></a>
                </li>
                <li>
                    <a href="#"><i class="fas fa-chart-line"></i> <span>An√°lises</span></a>
                </li>
                <li>
                    <a href="#"><i class="fas fa-cog"></i> <span>Configura√ß√µes</span></a>
                </li>
            </ul>
        </nav>
        <div class="logout desktop-logout">
            <a href="#"><i class="fas fa-sign-out-alt"></i><span>Sair</span></a>
        </div>
    </aside>

    <!-- Conte√∫do Principal -->
    <main class="main-content">
        <header class="top-bar">
            <a href="bio-links-list.html" class="back-arrow" style="color: inherit;"><i class="fas fa-arrow-left"></i></a>
            <h1>Editor Bio Link</h1>
            <div class="user-info">
                <span class="user-name">Ol√°, Usu√°rio</span>
                <img src="assets/img/avatar.svg" alt="Avatar" class="avatar">
                <div class="logout mobile-logout">
                    <a href="#"><i class="fas fa-sign-out-alt"></i><span>Sair</span></a>
                </div>
            </div>
        </header>

        <!-- Se√ß√£o de URL -->
        <section class="url-section">
            <div class="editor-section">
                <h3>URL Curto <i id="statusIcon" class="fas fa-circle" style="color: var(--primary-color);"></i></h3>
                <div class="url-field">
                    <div class="url-prefix">https://clyque.bio/</div>
                    <input type="text" value="zlict6ikaq" id="biolink-url">
                </div>
                <div class="url-actions">
                    <button class="url-button active" id="toggleButton">
                        <i class="fas fa-toggle-on"></i> Ativo
                    </button>
                    <button class="url-button" id="copyButton">
                        <i class="fas fa-copy"></i> Copiar URL
                    </button>
                    <button class="url-button stats">
                        <i class="fas fa-chart-line"></i> An√°lises
                    </button>
                </div>
            </div>
        </section>

        <div class="editor-container">
            <!-- Painel de Edi√ß√£o -->
            <section class="editor-panel">
                <div class="editor-tabs">
                    <button class="tab-button active" id="customizationTab">Customiza√ß√£o</button>
                    <button class="tab-button" id="blocksTab">Blocos</button>
                </div>

                <div class="editor-content">
                    <!-- Se√ß√£o de Customiza√ß√£o -->
                    <div class="editor-section" id="customizationSection">
                        <h3>Customiza√ß√£o</h3>
                        <div class="customization-options">
                            <div class="option-group">
                                <label>Fundo</label>
                                <div class="background-selector">
                                    <button class="bg-option solid active">S√≥lido</button>
                                    <button class="bg-option gradient">Gradiente</button>
                                </div>
                                <div class="color-picker">
                                    <input type="color" id="bgColor1" value="#ffffff">
                                    <input type="color" id="bgColor2" value="#3F51B5" class="hidden">
                                </div>
                            </div>

                            <div class="option-group">
                                <label>Fonte</label>
                                <select id="fontFamily">
                                    <option value="Inter">Inter</option>
                                    <option value="Roboto">Roboto</option>
                                    <option value="Poppins">Poppins</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <!-- Se√ß√£o de Blocos -->
                    <div class="editor-section" id="blocksSection">
                        <h3>Blocos</h3>
                        <div class="blocks-container">
                            <button class="block-button"><i class="fas fa-link"></i> Link</button>
                            <button class="block-button"><i class="fas fa-image"></i> Imagem</button>
                            <button class="block-button"><i class="fas fa-font"></i> Texto</button>
                            <button class="block-button"><i class="fas fa-share-alt"></i> Redes Sociais</button>
                            <button class="block-button"><i class="fab fa-spotify"></i> Spotify</button>
                            <button class="block-button"><i class="fab fa-youtube"></i> Youtube</button>
                            <!-- Adicione mais bot√µes conforme necess√°rio -->
                        </div>
                    </div>

                    <!-- Bot√µes de A√ß√£o -->
                    <div class="editor-actions">
                        <button class="save-button">Salvar Altera√ß√µes</button>
                    </div>
                </div>
            </section>

            <!-- Preview do Smartphone -->
            <section class="preview-panel">
                <div class="smartphone-wrapper">
                    <div class="smartphone">
                        <div class="smartphone-screen">
                            <div class="preview-content" id="previewContent">
                                <div class="bio-header">
                                    <!-- Removido o h1 daqui -->
                                </div>
                                <div class="inactive-notification" id="inactiveNotification" style="display: none; background-color: #ff3b30; color: white; text-align: center; padding: 8px; font-size: 14px; font-weight: bold;">
                                    Este link est√° inativo
                                </div>
                                <div class="bio-content">
                                    <!-- O conte√∫do do preview ser√° atualizado via JavaScript -->
                                </div>
                                <div class="bio-footer">
                                    <img src="assets/img/clyque2.png" alt="Clyque.bio Logo" style="max-width: 60%; height: auto;">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </div>
    </main>

    <!-- Modais para cadastro de blocos -->
    <div class="modal-overlay" id="modalOverlay">
        <!-- Modal para Link -->
        <div class="modal" id="linkModal">
            <div class="modal-header">
                <h3>Adicionar Link</h3>
                <button class="close-modal"><i class="fas fa-times"></i></button>
            </div>
            <div class="modal-body">
                <form id="linkForm">
                    <div class="form-group">
                        <label for="linkTitle">T√≠tulo</label>
                        <input type="text" id="linkTitle" placeholder="Ex: Meu Website" required>
                    </div>
                    <div class="form-group">
                        <label>Adicionar Emoji</label>
                        <div class="emoji-selector">
                            <button type="button" class="emoji-button" data-emoji="üòä">üòä</button>
                            <button type="button" class="emoji-button" data-emoji="üëç">üëç</button>
                            <button type="button" class="emoji-button" data-emoji="‚ù§Ô∏è">‚ù§Ô∏è</button>
                            <button type="button" class="emoji-button" data-emoji="üî•">üî•</button>
                            <button type="button" class="emoji-button" data-emoji="‚≠ê">‚≠ê</button>
                            <button type="button" class="emoji-button" data-emoji="üéâ">üéâ</button>
                            <button type="button" class="emoji-button" data-emoji="üì±">üì±</button>
                            <button type="button" class="emoji-button" data-emoji="üíº">üíº</button>
                            <button type="button" class="emoji-button" data-emoji="üì∑">üì∑</button>
                            <button type="button" class="emoji-button" data-emoji="üéµ">üéµ</button>
                            <button type="button" class="emoji-button" data-emoji="üì∫">üì∫</button>
                            <button type="button" class="emoji-button" data-emoji="üõí">üõí</button>
                            <button type="button" class="emoji-button" data-emoji="üí∞">üí∞</button>
                            <button type="button" class="emoji-button" data-emoji="üéÆ">üéÆ</button>
                            <button type="button" class="emoji-button" data-emoji="üçî">üçî</button>
                            <button type="button" class="emoji-button" data-emoji="üçï">üçï</button>
                            <button type="button" class="emoji-button" data-emoji="üöÄ">üöÄ</button>
                            <button type="button" class="emoji-button" data-emoji="‚úÖ">‚úÖ</button>
                        </div>
                        <small class="emoji-help">Clique em um emoji para adicion√°-lo ao t√≠tulo do link. O emoji ser√° inserido na posi√ß√£o atual do cursor.</small>
                    </div>
                    <div class="form-group">
                        <label for="linkUrl">URL</label>
                        <input type="url" id="linkUrl" placeholder="https://exemplo.com" required>
                    </div>
                    <div class="form-group">
                        <label for="linkColor">Cor do Bot√£o</label>
                        <input type="color" id="linkColor" value="#3F51B5">
                    </div>
                    <div class="form-group">
                        <label for="linkTextColor">Cor do Texto</label>
                        <input type="color" id="linkTextColor" value="#FFFFFF">
                    </div>
                    <div class="form-group">
                        <label>Pr√©via do Bot√£o</label>
                        <div class="link-preview" id="linkPreview">
                            <a href="#" class="preview-link">Pr√©via do Link</a>
                        </div>
                    </div>
                    <div class="form-actions">
                        <button type="button" class="cancel-button">Cancelar</button>
                        <button type="submit" class="save-button">Adicionar</button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Modal para Imagem -->
        <div class="modal" id="imageModal">
            <div class="modal-header">
                <h3>Adicionar Imagem</h3>
                <button class="close-modal"><i class="fas fa-times"></i></button>
            </div>
            <div class="modal-body">
                <form id="imageForm">
                    <div class="form-group">
                        <label for="imageTitle">T√≠tulo (opcional)</label>
                        <input type="text" id="imageTitle" placeholder="T√≠tulo da imagem">
                    </div>
                    <div class="form-group">
                        <label for="imageUpload">Selecionar Imagem</label>
                        <input type="file" id="imageUpload" accept="image/*">
                        <div class="image-preview" id="imagePreview"></div>
                    </div>
                    <div class="form-actions">
                        <button type="button" class="cancel-button">Cancelar</button>
                        <button type="submit" class="save-button">Adicionar</button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Modal para Texto -->
        <div class="modal" id="textModal">
            <div class="modal-header">
                <h3>Adicionar Texto</h3>
                <button class="close-modal"><i class="fas fa-times"></i></button>
            </div>
            <div class="modal-body">
                <form id="textForm">
                    <div class="form-group">
                        <label for="textContent">Conte√∫do</label>
                        <textarea id="textContent" rows="4" placeholder="Digite seu texto aqui..." required></textarea>
                    </div>
                    <div class="form-group">
                        <label>Adicionar Emoji</label>
                        <div class="emoji-selector">
                            <button type="button" class="emoji-button text-emoji-button" data-emoji="üòä">üòä</button>
                            <button type="button" class="emoji-button text-emoji-button" data-emoji="üëç">üëç</button>
                            <button type="button" class="emoji-button text-emoji-button" data-emoji="‚ù§Ô∏è">‚ù§Ô∏è</button>
                            <button type="button" class="emoji-button text-emoji-button" data-emoji="üî•">üî•</button>
                            <button type="button" class="emoji-button text-emoji-button" data-emoji="‚≠ê">‚≠ê</button>
                            <button type="button" class="emoji-button text-emoji-button" data-emoji="üéâ">üéâ</button>
                            <button type="button" class="emoji-button text-emoji-button" data-emoji="üì±">üì±</button>
                            <button type="button" class="emoji-button text-emoji-button" data-emoji="üíº">üíº</button>
                            <button type="button" class="emoji-button text-emoji-button" data-emoji="üì∑">üì∑</button>
                            <button type="button" class="emoji-button text-emoji-button" data-emoji="üéµ">üéµ</button>
                            <button type="button" class="emoji-button text-emoji-button" data-emoji="üì∫">üì∫</button>
                            <button type="button" class="emoji-button text-emoji-button" data-emoji="üõí">üõí</button>
                            <button type="button" class="emoji-button text-emoji-button" data-emoji="üí∞">üí∞</button>
                            <button type="button" class="emoji-button text-emoji-button" data-emoji="üéÆ">üéÆ</button>
                            <button type="button" class="emoji-button text-emoji-button" data-emoji="üçî">üçî</button>
                            <button type="button" class="emoji-button text-emoji-button" data-emoji="üçï">üçï</button>
                            <button type="button" class="emoji-button text-emoji-button" data-emoji="üöÄ">üöÄ</button>
                            <button type="button" class="emoji-button text-emoji-button" data-emoji="‚úÖ">‚úÖ</button>
                        </div>
                        <small class="emoji-help">Clique em um emoji para adicion√°-lo ao seu texto. O emoji ser√° inserido na posi√ß√£o atual do cursor.</small>
                    </div>
                    <div class="form-group">
                        <label for="textAlign">Alinhamento</label>
                        <select id="textAlign">
                            <option value="left">Esquerda</option>
                            <option value="center" selected>Centro</option>
                            <option value="right">Direita</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="textColor">Cor do Texto</label>
                        <input type="color" id="textColor" value="#000000">
                    </div>
                    <div class="form-group">
                        <label>Pr√©via do Texto</label>
                        <div class="text-preview" id="textPreview">
                            <p>Pr√©via do texto com o estilo selecionado</p>
                        </div>
                    </div>
                    <div class="form-actions">
                        <button type="button" class="cancel-button">Cancelar</button>
                        <button type="submit" class="save-button">Adicionar</button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Modal para Redes Sociais -->
        <div class="modal" id="socialModal">
            <div class="modal-header">
                <h3>Adicionar Redes Sociais</h3>
                <button class="close-modal"><i class="fas fa-times"></i></button>
            </div>
            <div class="modal-body">
                <form id="socialForm">
                    <div class="form-group">
                        <label>Selecione as redes sociais que deseja adicionar</label>
                        <div class="social-networks-container">
                            <div class="social-network-item">
                                <input type="checkbox" id="instagram" name="socialNetworks" value="instagram">
                                <i class="fab fa-instagram"></i>
                                <label for="instagram" class="checkbox-label">Instagram</label>
                                <input type="url" id="instagramUrl" placeholder="https://instagram.com/seu_perfil" class="social-url">
                            </div>
                            <div class="social-network-item">
                                <input type="checkbox" id="facebook" name="socialNetworks" value="facebook">
                                <i class="fab fa-facebook"></i>
                                <label for="facebook" class="checkbox-label">Facebook</label>
                                <input type="url" id="facebookUrl" placeholder="https://facebook.com/seu_perfil" class="social-url">
                            </div>
                            <div class="social-network-item">
                                <input type="checkbox" id="twitter" name="socialNetworks" value="twitter">
                                <i class="fab fa-twitter"></i>
                                <label for="twitter" class="checkbox-label">Twitter</label>
                                <input type="url" id="twitterUrl" placeholder="https://twitter.com/seu_perfil" class="social-url">
                            </div>
                            <div class="social-network-item">
                                <input type="checkbox" id="youtube" name="socialNetworks" value="youtube">
                                <i class="fab fa-youtube"></i>
                                <label for="youtube" class="checkbox-label">YouTube</label>
                                <input type="url" id="youtubeUrl" placeholder="https://youtube.com/c/seu_canal" class="social-url">
                            </div>
                            <div class="social-network-item">
                                <input type="checkbox" id="tiktok" name="socialNetworks" value="tiktok">
                                <i class="fab fa-tiktok"></i>
                                <label for="tiktok" class="checkbox-label">TikTok</label>
                                <input type="url" id="tiktokUrl" placeholder="https://tiktok.com/@seu_perfil" class="social-url">
                            </div>
                            <div class="social-network-item">
                                <input type="checkbox" id="linkedin" name="socialNetworks" value="linkedin">
                                <i class="fab fa-linkedin"></i>
                                <label for="linkedin" class="checkbox-label">LinkedIn</label>
                                <input type="url" id="linkedinUrl" placeholder="https://linkedin.com/in/seu_perfil" class="social-url">
                            </div>
                            <div class="social-network-item">
                                <input type="checkbox" id="whatsapp" name="socialNetworks" value="whatsapp">
                                <i class="fab fa-whatsapp"></i>
                                <label for="whatsapp" class="checkbox-label">WhatsApp</label>
                                <input type="url" id="whatsappUrl" placeholder="https://wa.me/5500000000000" class="social-url">
                            </div>
                            <div class="social-network-item">
                                <input type="checkbox" id="telegram" name="socialNetworks" value="telegram">
                                <i class="fab fa-telegram"></i>
                                <label for="telegram" class="checkbox-label">Telegram</label>
                                <input type="url" id="telegramUrl" placeholder="https://t.me/seu_perfil" class="social-url">
                            </div>
                        </div>
                    </div>
                    
                    <div class="social-options">
                        <div class="form-group">
                            <label for="socialStyle">Estilo dos √çcones</label>
                            <select id="socialStyle">
                                <option value="rounded" selected>Arredondado</option>
                                <option value="square">Quadrado</option>
                                <option value="circle">Circular</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="socialSize">Tamanho dos √çcones</label>
                            <select id="socialSize">
                                <option value="small">Pequeno</option>
                                <option value="medium" selected>M√©dio</option>
                                <option value="large">Grande</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="socialColor">Cor dos √çcones</label>
                            <select id="socialColor">
                                <option value="brand" selected>Cores originais</option>
                                <option value="custom">Personalizada</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="customSocialColor">Cor Personalizada</label>
                            <input type="color" id="customSocialColor" value="#673AB7" class="hidden">
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label>Pr√©via das Redes Sociais</label>
                        <div class="social-preview" id="socialPreview">
                            <div class="social-icons-preview">
                                <!-- √çcones de pr√©via ser√£o adicionados aqui via JavaScript -->
                            </div>
                        </div>
                    </div>
                    <div class="form-actions">
                        <button type="button" class="cancel-button">Cancelar</button>
                        <button type="submit" class="save-button">Adicionar</button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Outros modais podem ser adicionados aqui -->
    </div>

    <!-- Scripts -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Controle do bot√£o de ativar/desativar
            const toggleButton = document.getElementById('toggleButton');
            const statusIcon = document.getElementById('statusIcon');
            const inactiveNotification = document.getElementById('inactiveNotification');
            
            toggleButton.addEventListener('click', function() {
                const isActive = this.classList.contains('active');
                if (isActive) {
                    this.classList.remove('active');
                    this.innerHTML = '<i class="fas fa-toggle-off"></i> Inativo';
                    this.style.backgroundColor = 'red';
                    statusIcon.style.color = 'red';
                    inactiveNotification.style.display = 'block'; // Mostrar a barra de notifica√ß√£o
                } else {
                    this.classList.add('active');
                    this.innerHTML = '<i class="fas fa-toggle-on"></i> Ativo';
                    this.style.backgroundColor = 'var(--primary-color)';
                    statusIcon.style.color = 'var(--primary-color)';
                    inactiveNotification.style.display = 'none'; // Esconder a barra de notifica√ß√£o
                }
            });

            // Funcionalidade de copiar URL
            const copyButton = document.getElementById('copyButton');
            const urlInput = document.getElementById('biolink-url');
            const urlPrefix = document.querySelector('.url-prefix').textContent;

            copyButton.addEventListener('click', async function() {
                const fullUrl = urlPrefix + urlInput.value;
                try {
                    await navigator.clipboard.writeText(fullUrl);
                    
                    // Feedback visual
                    const originalText = this.innerHTML;
                    this.innerHTML = '<i class="fas fa-check"></i> Copiado!';
                    this.classList.add('active');
                    
                    setTimeout(() => {
                        this.innerHTML = originalText;
                        this.classList.remove('active');
                    }, 2000);
                } catch (err) {
                    console.error('Erro ao copiar:', err);
                }
            });

            // Preview em tempo real
            const bgColor1 = document.getElementById('bgColor1');
            const bgColor2 = document.getElementById('bgColor2');
            const previewContent = document.getElementById('previewContent');
            const solidBtn = document.querySelector('.bg-option.solid');
            const gradientBtn = document.querySelector('.bg-option.gradient');

            function updateBackground() {
                if (solidBtn.classList.contains('active')) {
                    previewContent.style.background = bgColor1.value;
                } else {
                    previewContent.style.background = `linear-gradient(45deg, ${bgColor1.value}, ${bgColor2.value})`;
                }
            }

            bgColor1.addEventListener('input', updateBackground);
            bgColor2.addEventListener('input', updateBackground);

            // Alternar entre s√≥lido e gradiente
            solidBtn.addEventListener('click', function() {
                solidBtn.classList.add('active');
                gradientBtn.classList.remove('active');
                bgColor2.classList.add('hidden');
                updateBackground();
            });

            gradientBtn.addEventListener('click', function() {
                gradientBtn.classList.add('active');
                solidBtn.classList.remove('active');
                bgColor2.classList.remove('hidden');
                updateBackground();
            });

            // Atualiza√ß√£o da fonte
            const fontSelect = document.getElementById('fontFamily');
            fontSelect.addEventListener('change', function() {
                previewContent.style.fontFamily = this.value;
            });

            // Fun√ß√£o para verificar se a cor √© clara
            function isLightColor(color) {
                const r = parseInt(color.substr(1, 2), 16);
                const g = parseInt(color.substr(3, 2), 16);
                const b = parseInt(color.substr(5, 2), 16);
                // F√≥rmula para determinar se a cor √© clara
                return (r * 0.299 + g * 0.587 + b * 0.114) > 186;
            }

            // Atualizar imagem do rodap√© com base na cor de fundo
            function updateFooterImage() {
                const footerImage = document.querySelector('.bio-footer img');
                if (isLightColor(bgColor1.value)) {
                    footerImage.src = 'assets/img/clyque.png';
                } else {
                    footerImage.src = 'assets/img/clyque2.png';
                }
            }

            // Adicionar evento para atualizar a imagem ao mudar a cor
            bgColor1.addEventListener('input', updateFooterImage);
            bgColor2.addEventListener('input', updateFooterImage);

            // Inicializar a imagem do rodap√©
            updateFooterImage();

            // Inicializar o preview
            updateBackground();

            // Alternar entre abas
            const customizationTab = document.getElementById('customizationTab');
            const blocksTab = document.getElementById('blocksTab');
            const customizationSection = document.getElementById('customizationSection');
            const blocksSection = document.getElementById('blocksSection');

            customizationTab.addEventListener('click', () => {
                customizationTab.classList.add('active');
                blocksTab.classList.remove('active');
                customizationSection.style.display = 'block';
                blocksSection.style.display = 'none';
            });

            blocksTab.addEventListener('click', () => {
                blocksTab.classList.add('active');
                customizationTab.classList.remove('active');
                blocksSection.style.display = 'block';
                customizationSection.style.display = 'none';
            });

            // Initialize the sections
            customizationSection.style.display = 'block';
            blocksSection.style.display = 'none';

            // Controle dos modais
            const modalOverlay = document.getElementById('modalOverlay');
            const modals = document.querySelectorAll('.modal');
            const blockButtons = document.querySelectorAll('.block-button');
            const closeButtons = document.querySelectorAll('.close-modal');
            const cancelButtons = document.querySelectorAll('.cancel-button');
            const bioContent = document.querySelector('.bio-content');
            
            // Adicionar uma vari√°vel para rastrear se estamos editando ou adicionando
            let isEditing = false;
            let currentEditingElement = null;

            // Formul√°rio de Link
            const linkForm = document.getElementById('linkForm');
            const linkTitle = document.getElementById('linkTitle');
            const linkUrl = document.getElementById('linkUrl');
            const linkColor = document.getElementById('linkColor');
            const linkTextColor = document.getElementById('linkTextColor');
            const linkPreviewContainer = document.getElementById('linkPreview');
            let previewLink = linkPreviewContainer ? linkPreviewContainer.querySelector('.preview-link') : null;
            
            // Formul√°rio de Texto
            const textForm = document.getElementById('textForm');
            const textContent = document.getElementById('textContent');
            const textAlign = document.getElementById('textAlign');
            const textColorInput = document.getElementById('textColor');
            const textPreviewContainer = document.getElementById('textPreview');
            let textPreview = textPreviewContainer ? textPreviewContainer.querySelector('p') : null;
            
            // Formul√°rio de Imagem
            const imageForm = document.getElementById('imageForm');
            const imageUpload = document.getElementById('imageUpload');
            const imagePreview = document.getElementById('imagePreview');
            
            // Verificar e criar elementos de pr√©via se necess√°rio
            if (linkPreviewContainer && !previewLink) {
                previewLink = document.createElement('a');
                previewLink.href = '#';
                previewLink.className = 'preview-link';
                previewLink.textContent = 'Pr√©via do Link';
                previewLink.style.backgroundColor = '#3F51B5';
                previewLink.style.color = '#FFFFFF';
                linkPreviewContainer.appendChild(previewLink);
            }
            
            if (textPreviewContainer && !textPreview) {
                textPreview = document.createElement('p');
                textPreview.textContent = 'Pr√©via do texto com o estilo selecionado';
                textPreview.style.textAlign = 'center';
                textPreview.style.color = '#000000';
                textPreviewContainer.appendChild(textPreview);
            }
            
            // Fun√ß√£o para atualizar pr√©via do link em tempo real
            function updateLinkPreview() {
                console.log('Atualizando pr√©via do link...');
                
                // Verificar novamente se temos o elemento de pr√©via
                if (!previewLink && linkPreviewContainer) {
                    previewLink = linkPreviewContainer.querySelector('.preview-link');
                    if (!previewLink) {
                        previewLink = document.createElement('a');
                        previewLink.href = '#';
                        previewLink.className = 'preview-link';
                        previewLink.textContent = 'Pr√©via do Link';
                        previewLink.style.backgroundColor = '#3F51B5';
                        previewLink.style.color = '#FFFFFF';
                        linkPreviewContainer.appendChild(previewLink);
                        console.log('Elemento de pr√©via de link criado:', previewLink);
                    }
                }
                
                if (!previewLink || !linkColor || !linkTextColor) {
                    console.error('Elementos necess√°rios para atualizar a pr√©via de link n√£o encontrados');
                    console.log('previewLink:', previewLink);
                    console.log('linkColor:', linkColor);
                    console.log('linkTextColor:', linkTextColor);
                    return;
                }
                
                previewLink.style.backgroundColor = linkColor.value;
                previewLink.style.color = linkTextColor.value;
                
                if (linkTitle && linkTitle.value) {
                    previewLink.textContent = linkTitle.value;
                } else {
                    previewLink.textContent = 'Pr√©via do Link';
                }
                
                console.log('Pr√©via de link atualizada:', linkColor.value, linkTextColor.value);
            }
            
            // Fun√ß√£o para atualizar pr√©via do texto em tempo real
            function updateTextPreview() {
                console.log('Atualizando pr√©via do texto...');
                
                // Verificar novamente se temos o elemento de pr√©via
                if (!textPreview && textPreviewContainer) {
                    textPreview = textPreviewContainer.querySelector('p');
                    if (!textPreview) {
                        textPreview = document.createElement('p');
                        textPreview.textContent = 'Pr√©via do texto com o estilo selecionado';
                        textPreview.style.textAlign = 'center';
                        textPreview.style.color = '#000000';
                        textPreviewContainer.appendChild(textPreview);
                        console.log('Elemento de pr√©via de texto criado:', textPreview);
                    }
                }
                
                if (!textPreview || !textColorInput || !textAlign) {
                    console.error('Elementos necess√°rios para atualizar a pr√©via de texto n√£o encontrados');
                    console.log('textPreview:', textPreview);
                    console.log('textColorInput:', textColorInput);
                    console.log('textAlign:', textAlign);
                    return;
                }
                
                textPreview.style.color = textColorInput.value;
                textPreview.style.textAlign = textAlign.value;
                
                if (textContent && textContent.value) {
                    textPreview.textContent = textContent.value;
                } else {
                    textPreview.textContent = 'Pr√©via do texto com o estilo selecionado';
                }
                
                console.log('Pr√©via de texto atualizada:', textColorInput.value, textAlign.value);
            }
            
            // Fun√ß√£o para criar os controles de edi√ß√£o para cada bloco
            function createBlockControls(blockElement, blockType, blockData) {
                const controlsDiv = document.createElement('div');
                controlsDiv.className = 'block-controls';
                
                // Bot√£o de edi√ß√£o
                const editButton = document.createElement('button');
                editButton.className = 'edit-block';
                editButton.innerHTML = '<i class="fas fa-edit"></i> Editar';
                editButton.addEventListener('click', function() {
                    editBlock(blockElement, blockType, blockData);
                });
                
                // Bot√£o de exclus√£o
                const deleteButton = document.createElement('button');
                deleteButton.className = 'delete-block';
                deleteButton.innerHTML = '<i class="fas fa-trash"></i> Excluir';
                deleteButton.addEventListener('click', function() {
                    if (confirm('Tem certeza que deseja excluir este bloco?')) {
                        blockElement.remove();
                    }
                });
                
                controlsDiv.appendChild(editButton);
                controlsDiv.appendChild(deleteButton);
                
                return controlsDiv;
            }
            
            // Fun√ß√£o para editar um bloco existente
            function editBlock(blockElement, blockType, blockData) {
                console.log('Editando bloco:', blockType, blockData);
                
                // Definir o estado de edi√ß√£o
                isEditing = true;
                currentEditingElement = blockElement;
                
                // Armazenar os dados no elemento para refer√™ncia futura
                blockElement._blockData = blockData;
                
                // Abrir o modal correspondente ao tipo de bloco
                if (blockType === 'link') {
                    // Limpar o formul√°rio antes de preencher com os dados existentes
                    if (linkForm) linkForm.reset();
                    
                    // Preencher o formul√°rio com os dados existentes
                    linkTitle.value = blockData.title || '';
                    linkUrl.value = blockData.url || '';
                    linkColor.value = blockData.backgroundColor || '#3F51B5';
                    linkTextColor.value = blockData.textColor || '#FFFFFF';
                    
                    // Atualizar a pr√©via
                    setTimeout(updateLinkPreview, 100);
                    
                    // Mudar o texto do bot√£o para "Atualizar"
                    const saveButton = document.querySelector('#linkModal .save-button');
                    if (saveButton) saveButton.textContent = 'Atualizar';
                    
                    // Abrir o modal
                    openModal('linkModal');
                } else if (blockType === 'text') {
                    // Limpar o formul√°rio antes de preencher com os dados existentes
                    if (textForm) textForm.reset();
                    
                    // Preencher o formul√°rio com os dados existentes
                    textContent.value = blockData.content || '';
                    textAlign.value = blockData.align || 'center';
                    textColorInput.value = blockData.color || '#000000';
                    
                    // Atualizar a pr√©via
                    setTimeout(updateTextPreview, 100);
                    
                    // Mudar o texto do bot√£o para "Atualizar"
                    const saveButton = document.querySelector('#textModal .save-button');
                    if (saveButton) saveButton.textContent = 'Atualizar';
                    
                    // Abrir o modal
                    openModal('textModal');
                } else if (blockType === 'social') {
                    // Limpar o formul√°rio antes de preencher com os dados existentes
                    if (socialForm) socialForm.reset();
                    
                    // Preencher o formul√°rio com os dados existentes
                    if (socialStyle) socialStyle.value = blockData.style || 'rounded';
                    if (socialSize) socialSize.value = blockData.size || 'medium';
                    if (socialColor) socialColor.value = blockData.colorType || 'brand';
                    
                    if (customSocialColor) {
                        customSocialColor.value = blockData.customColor || '#673AB7';
                        if (blockData.colorType === 'custom') {
                            customSocialColor.classList.remove('hidden');
                        } else {
                            customSocialColor.classList.add('hidden');
                        }
                    }
                    
                    // Marcar os checkboxes e preencher URLs para as redes sociais existentes
                    if (blockData.networks && blockData.networks.length > 0) {
                        blockData.networks.forEach(network => {
                            const checkbox = document.getElementById(network.type);
                            const urlInput = document.getElementById(network.type + 'Url');
                            
                            if (checkbox) {
                                checkbox.checked = true;
                            }
                            
                            if (urlInput) {
                                urlInput.value = network.url || '';
                                urlInput.style.display = 'block';
                                urlInput.required = true;
                            }
                        });
                    }
                    
                    // Atualizar a pr√©via
                    setTimeout(updateSocialPreview, 100);
                    
                    // Mudar o texto do bot√£o para "Atualizar"
                    const saveButton = document.querySelector('#socialModal .save-button');
                    if (saveButton) saveButton.textContent = 'Atualizar';
                    
                    // Abrir o modal
                    openModal('socialModal');
                } else if (blockType === 'image') {
                    // Para imagens, apenas abrimos o modal de imagem
                    // N√£o √© poss√≠vel editar a imagem existente, apenas substitu√≠-la
                    alert('Para editar uma imagem, exclua-a e adicione uma nova.');
                    isEditing = false;
                    currentEditingElement = null;
                }
            }

            // Fun√ß√£o para abrir modal espec√≠fico
            function openModal(modalId) {
                console.log('Abrindo modal:', modalId, 'isEditing:', isEditing);
                
                // Resetar o estado de edi√ß√£o quando abrimos um modal diretamente
                // (n√£o atrav√©s da fun√ß√£o editBlock)
                if (!isEditing) {
                    currentEditingElement = null;
                    
                    // Garantir que o bot√£o diga "Adicionar" quando estamos adicionando um novo bloco
                    const saveButton = document.querySelector(`#${modalId} .save-button`);
                    if (saveButton) {
                        saveButton.textContent = 'Adicionar';
                    }
                }
                
                modalOverlay.style.display = 'flex';
                document.getElementById(modalId).style.display = 'block';
                
                // For√ßar a atualiza√ß√£o das pr√©vias quando o modal √© aberto
                if (modalId === 'linkModal') {
                    console.log('Atualizando pr√©via do link ao abrir o modal');
                    setTimeout(updateLinkPreview, 100);
                } else if (modalId === 'textModal') {
                    console.log('Atualizando pr√©via do texto ao abrir o modal');
                    setTimeout(updateTextPreview, 100);
                }
            }

            // Fun√ß√£o para fechar todos os modais
            function closeAllModals() {
                modalOverlay.style.display = 'none';
                modals.forEach(modal => {
                    modal.style.display = 'none';
                });
                
                // Restaurar os textos dos bot√µes para "Adicionar" ao fechar os modais
                document.querySelectorAll('.modal .save-button').forEach(button => {
                    button.textContent = 'Adicionar';
                });
                
                // Resetar o estado de edi√ß√£o ao fechar os modais
                isEditing = false;
                currentEditingElement = null;
                
                // Limpar os formul√°rios
                if (linkForm) linkForm.reset();
                if (textForm) textForm.reset();
                if (imageForm) {
                    imageForm.reset();
                    if (imagePreview) imagePreview.innerHTML = '';
                }
                
                // Resetar as pr√©vias
                if (previewLink) {
                    previewLink.textContent = 'Pr√©via do Link';
                    previewLink.style.backgroundColor = '#3F51B5';
                    previewLink.style.color = '#FFFFFF';
                }
                
                if (textPreview) {
                    textPreview.textContent = 'Pr√©via do texto com o estilo selecionado';
                    textPreview.style.textAlign = 'center';
                    textPreview.style.color = '#000000';
                }
            }

            // Adicionar evento de clique para cada bot√£o de bloco
            blockButtons.forEach(button => {
                button.addEventListener('click', function() {
                    console.log('Bot√£o de bloco clicado:', this.textContent.trim());
                    
                    // Resetar o estado de edi√ß√£o quando clicamos em um bot√£o de bloco
                    isEditing = false;
                    currentEditingElement = null;
                    
                    const blockType = this.textContent.trim().toLowerCase();
                    
                    if (blockType.includes('link')) {
                        // Limpar o formul√°rio antes de abrir o modal
                        if (linkForm) linkForm.reset();
                        
                        // Resetar os valores padr√£o
                        if (linkColor) linkColor.value = '#3F51B5';
                        if (linkTextColor) linkTextColor.value = '#FFFFFF';
                        
                        // Atualizar a pr√©via
                        setTimeout(updateLinkPreview, 100);
                        
                        openModal('linkModal');
                    } else if (blockType.includes('imagem')) {
                        // Limpar o formul√°rio antes de abrir o modal
                        if (imageForm) {
                            imageForm.reset();
                            if (imagePreview) imagePreview.innerHTML = '';
                        }
                        openModal('imageModal');
                    } else if (blockType.includes('texto')) {
                        // Limpar o formul√°rio antes de abrir o modal
                        if (textForm) textForm.reset();
                        
                        // Resetar os valores padr√£o
                        if (textAlign) textAlign.value = 'center';
                        if (textColorInput) textColorInput.value = '#000000';
                        
                        // Atualizar a pr√©via
                        setTimeout(updateTextPreview, 100);
                        
                        openModal('textModal');
                    } else if (blockType.includes('redes sociais')) {
                        // Limpar o formul√°rio antes de abrir o modal
                        if (socialForm) socialForm.reset();
                        
                        // Esconder todos os campos de URL
                        document.querySelectorAll('.social-url').forEach(input => {
                            input.style.display = 'none';
                            input.required = false;
                        });
                        
                        // Resetar os valores padr√£o
                        if (socialStyle) socialStyle.value = 'rounded';
                        if (socialSize) socialSize.value = 'medium';
                        if (socialColor) socialColor.value = 'brand';
                        if (customSocialColor) {
                            customSocialColor.value = '#673AB7';
                            customSocialColor.classList.add('hidden');
                        }
                        
                        // Atualizar a pr√©via
                        setTimeout(updateSocialPreview, 100);
                        
                        openModal('socialModal');
                    } else if (blockType.includes('spotify')) {
                        // Implementar modal de Spotify
                        alert('Modal de Spotify ser√° implementado em breve!');
                    } else if (blockType.includes('youtube')) {
                        // Implementar modal de Youtube
                        alert('Modal de Youtube ser√° implementado em breve!');
                    }
                });
            });

            // Fechar modais ao clicar no bot√£o de fechar ou cancelar
            closeButtons.forEach(button => {
                button.addEventListener('click', closeAllModals);
            });

            cancelButtons.forEach(button => {
                button.addEventListener('click', closeAllModals);
            });

            // Fechar modal ao clicar fora dele
            modalOverlay.addEventListener('click', function(e) {
                if (e.target === modalOverlay) {
                    closeAllModals();
                }
            });
            
            // Adicionar eventos para atualiza√ß√£o em tempo real para o link
            if (linkTitle) {
                linkTitle.addEventListener('input', updateLinkPreview);
            }
            
            if (linkColor) {
                linkColor.addEventListener('input', updateLinkPreview);
            }
            
            if (linkTextColor) {
                linkTextColor.addEventListener('input', updateLinkPreview);
            }
            
            // Adicionar funcionalidade para os bot√µes de emoji
            const emojiButtons = document.querySelectorAll('.emoji-button');
            emojiButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const emoji = this.getAttribute('data-emoji');
                    if (linkTitle) {
                        // Inserir o emoji na posi√ß√£o do cursor
                        const cursorPos = linkTitle.selectionStart;
                        const textBefore = linkTitle.value.substring(0, cursorPos);
                        const textAfter = linkTitle.value.substring(cursorPos);
                        linkTitle.value = textBefore + emoji + textAfter;
                        
                        // Atualizar a pr√©via
                        updateLinkPreview();
                        
                        // Focar no input e posicionar o cursor ap√≥s o emoji
                        linkTitle.focus();
                        linkTitle.selectionStart = cursorPos + emoji.length;
                        linkTitle.selectionEnd = cursorPos + emoji.length;
                    }
                });
            });
            
            // Adicionar eventos para atualiza√ß√£o em tempo real para o texto
            if (textContent) {
                textContent.addEventListener('input', updateTextPreview);
            }
            
            if (textAlign) {
                textAlign.addEventListener('change', updateTextPreview);
            }
            
            if (textColorInput) {
                textColorInput.addEventListener('input', updateTextPreview);
            }
            
            // Adicionar funcionalidade para os bot√µes de emoji no formul√°rio de texto
            const textEmojiButtons = document.querySelectorAll('.text-emoji-button');
            textEmojiButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const emoji = this.getAttribute('data-emoji');
                    if (textContent) {
                        // Inserir o emoji na posi√ß√£o do cursor
                        const cursorPos = textContent.selectionStart;
                        const textBefore = textContent.value.substring(0, cursorPos);
                        const textAfter = textContent.value.substring(cursorPos);
                        textContent.value = textBefore + emoji + textAfter;
                        
                        // Atualizar a pr√©via
                        updateTextPreview();
                        
                        // Focar no textarea e posicionar o cursor ap√≥s o emoji
                        textContent.focus();
                        textContent.selectionStart = cursorPos + emoji.length;
                        textContent.selectionEnd = cursorPos + emoji.length;
                    }
                });
            });
            
            // Preview da imagem selecionada
            if (imageUpload) {
                imageUpload.addEventListener('change', function() {
                    const file = this.files[0];
                    if (file) {
                        const reader = new FileReader();
                        reader.onload = function(e) {
                            imagePreview.innerHTML = `<img src="${e.target.result}" alt="Preview">`;
                        };
                        reader.readAsDataURL(file);
                    }
                });
            }
            
            // Submiss√£o do formul√°rio de link
            linkForm.addEventListener('submit', function(e) {
                e.preventDefault();
                console.log('Formul√°rio de link enviado, isEditing:', isEditing);
                
                const title = linkTitle.value;
                const url = linkUrl.value;
                const color = linkColor.value;
                const textColor = linkTextColor.value;
                
                // Extrair emoji se houver no in√≠cio do t√≠tulo
                let emoji = '';
                let displayTitle = title;
                
                // Verificar se o t√≠tulo come√ßa com um emoji
                const emojiRegex = /^(\p{Emoji})/u;
                const emojiMatch = title.match(emojiRegex);
                
                if (emojiMatch) {
                    emoji = emojiMatch[0];
                    // Remover o emoji do t√≠tulo para exibi√ß√£o separada
                    displayTitle = title.replace(emojiRegex, '').trim();
                }
                
                // Se estiver editando, n√£o criar um novo elemento
                if (isEditing && currentEditingElement) {
                    console.log('Atualizando link existente');
                    // Atualizar o bloco existente
                    const linkElement = currentEditingElement.querySelector('a');
                    if (linkElement) {
                        console.log('Elemento de link encontrado, atualizando...');
                        
                        // Limpar o conte√∫do atual
                        linkElement.innerHTML = '';
                        
                        // Adicionar emoji se existir
                        if (emoji) {
                            const emojiSpan = document.createElement('span');
                            emojiSpan.className = 'emoji-icon';
                            emojiSpan.textContent = emoji;
                            linkElement.appendChild(emojiSpan);
                        }
                        
                        // Adicionar o t√≠tulo
                        const titleSpan = document.createElement('span');
                        titleSpan.textContent = displayTitle || title;
                        linkElement.appendChild(titleSpan);
                        
                        // Atualizar propriedades
                        linkElement.href = url;
                        linkElement.style.backgroundColor = color;
                        linkElement.style.color = textColor;
                        
                        // Atualizar os dados do bloco
                        const blockData = currentEditingElement._blockData;
                        if (blockData) {
                            blockData.title = title;
                            blockData.url = url;
                            blockData.backgroundColor = color;
                            blockData.textColor = textColor;
                        }
                        
                        // Reaplicar a funcionalidade de arrastar e soltar ap√≥s a edi√ß√£o
                        makeDraggable(currentEditingElement);
                    } else {
                        console.error('Elemento de link n√£o encontrado no bloco atual');
                        console.log('currentEditingElement:', currentEditingElement);
                        console.log('HTML do elemento:', currentEditingElement.innerHTML);
                    }
                    
                    // Resetar o estado de edi√ß√£o
                    isEditing = false;
                    currentEditingElement = null;
                } else {
                    console.log('Criando novo link');
                    // Criar wrapper para o link
                    const linkWrapper = document.createElement('div');
                    linkWrapper.className = 'bio-link-wrapper';
                    
                    // Criar elemento de link
                    const linkElement = document.createElement('a');
                    linkElement.href = url;
                    linkElement.className = 'bio-link';
                    linkElement.style.backgroundColor = color;
                    linkElement.style.color = textColor;
                    linkElement.target = '_blank';
                    
                    // Adicionar emoji se existir
                    if (emoji) {
                        const emojiSpan = document.createElement('span');
                        emojiSpan.className = 'emoji-icon';
                        emojiSpan.textContent = emoji;
                        linkElement.appendChild(emojiSpan);
                    }
                    
                    // Adicionar o t√≠tulo
                    const titleSpan = document.createElement('span');
                    titleSpan.textContent = displayTitle || title;
                    linkElement.appendChild(titleSpan);
                    
                    // Adicionar o link ao wrapper
                    linkWrapper.appendChild(linkElement);
                    
                    // Dados do bloco para edi√ß√£o posterior
                    const blockData = {
                        title: title,
                        url: url,
                        backgroundColor: color,
                        textColor: textColor
                    };
                    
                    // Armazenar os dados no elemento para refer√™ncia futura
                    linkWrapper._blockData = blockData;
                    
                    // Adicionar controles de edi√ß√£o
                    const controls = createBlockControls(linkWrapper, 'link', blockData);
                    linkWrapper.appendChild(controls);
                    
                    // Adicionar al√ßa de arrasto
                    addDragHandle(linkWrapper);
                    
                    // Adicionar ao preview
                    bioContent.appendChild(linkWrapper);
                    
                    // Tornar o elemento arrast√°vel
                    makeDraggable(linkWrapper);
                }
                
                // Limpar formul√°rio e fechar modal
                this.reset();
                closeAllModals();
            });

            // Submiss√£o do formul√°rio de imagem
            imageForm.addEventListener('submit', function(e) {
                e.preventDefault();
                
                const title = document.getElementById('imageTitle').value;
                const file = imageUpload.files[0];
                
                if (file) {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        // Criar wrapper para a imagem
                        const imageWrapper = document.createElement('div');
                        imageWrapper.className = 'bio-image-wrapper';
                        
                        // Criar container de imagem
                        const imageContainer = document.createElement('div');
                        imageContainer.className = 'bio-image';
                        
                        // Criar elemento de imagem
                        const img = document.createElement('img');
                        img.src = e.target.result;
                        img.alt = title || 'Imagem';
                        
                        // Adicionar t√≠tulo se fornecido
                        if (title) {
                            const titleElement = document.createElement('p');
                            titleElement.textContent = title;
                            titleElement.style.textAlign = 'center';
                            titleElement.style.margin = '5px 0';
                            imageContainer.appendChild(titleElement);
                        }
                        
                        imageContainer.appendChild(img);
                        imageWrapper.appendChild(imageContainer);
                        
                        // Dados do bloco para edi√ß√£o posterior
                        const blockData = {
                            title: title,
                            imageSrc: e.target.result
                        };
                        
                        // Armazenar os dados no elemento para refer√™ncia futura
                        imageWrapper._blockData = blockData;
                        
                        // Adicionar controles de edi√ß√£o
                        const controls = createBlockControls(imageWrapper, 'image', blockData);
                        imageWrapper.appendChild(controls);
                        
                        // Adicionar al√ßa de arrasto
                        addDragHandle(imageWrapper);
                        
                        // Adicionar ao preview
                        bioContent.appendChild(imageWrapper);
                        
                        // Tornar o elemento arrast√°vel
                        makeDraggable(imageWrapper);
                    };
                    reader.readAsDataURL(file);
                }
                
                // Limpar formul√°rio e fechar modal
                this.reset();
                imagePreview.innerHTML = '';
                closeAllModals();
            });
            
            // Submiss√£o do formul√°rio de texto
            textForm.addEventListener('submit', function(e) {
                e.preventDefault();
                console.log('Formul√°rio de texto enviado, isEditing:', isEditing);
                
                const content = textContent.value;
                const align = textAlign.value;
                const color = textColorInput.value;
                
                // Se estiver editando, n√£o criar um novo elemento
                if (isEditing && currentEditingElement) {
                    console.log('Atualizando texto existente');
                    // Atualizar o bloco existente
                    const textElement = currentEditingElement.querySelector('.bio-text');
                    if (textElement) {
                        console.log('Elemento de texto encontrado, atualizando...');
                        textElement.textContent = content;
                        textElement.style.textAlign = align;
                        textElement.style.color = color;
                        
                        // Atualizar os dados do bloco
                        const blockData = currentEditingElement._blockData;
                        if (blockData) {
                            blockData.content = content;
                            blockData.align = align;
                            blockData.color = color;
                        }
                        
                        // Reaplicar a funcionalidade de arrastar e soltar ap√≥s a edi√ß√£o
                        makeDraggable(currentEditingElement);
                    } else {
                        console.error('Elemento de texto n√£o encontrado no bloco atual');
                        console.log('currentEditingElement:', currentEditingElement);
                        console.log('HTML do elemento:', currentEditingElement.innerHTML);
                    }
                    
                    // Resetar o estado de edi√ß√£o
                    isEditing = false;
                    currentEditingElement = null;
                } else {
                    console.log('Criando novo texto');
                    // Criar wrapper para o texto
                    const textWrapper = document.createElement('div');
                    textWrapper.className = 'bio-text-wrapper';
                    
                    // Criar elemento de texto
                    const textElement = document.createElement('div');
                    textElement.className = 'bio-text';
                    textElement.textContent = content;
                    textElement.style.textAlign = align;
                    textElement.style.color = color;
                    
                    // Adicionar o texto ao wrapper
                    textWrapper.appendChild(textElement);
                    
                    // Dados do bloco para edi√ß√£o posterior
                    const blockData = {
                        content: content,
                        align: align,
                        color: color
                    };
                    
                    // Armazenar os dados no elemento para refer√™ncia futura
                    textWrapper._blockData = blockData;
                    
                    // Adicionar controles de edi√ß√£o
                    const controls = createBlockControls(textWrapper, 'text', blockData);
                    textWrapper.appendChild(controls);
                    
                    // Adicionar al√ßa de arrasto
                    addDragHandle(textWrapper);
                    
                    // Adicionar ao preview
                    bioContent.appendChild(textWrapper);
                    
                    // Tornar o elemento arrast√°vel
                    makeDraggable(textWrapper);
                }
                
                // Limpar formul√°rio e fechar modal
                this.reset();
                closeAllModals();
            });
            
            // Inicializar as pr√©vias ap√≥s definir as fun√ß√µes
            setTimeout(function() {
                console.log('Inicializando pr√©vias...');
                try {
                    if (typeof updateLinkPreview === 'function') {
                        console.log('Chamando updateLinkPreview');
                        updateLinkPreview();
                    }
                    if (typeof updateTextPreview === 'function') {
                        console.log('Chamando updateTextPreview');
                        updateTextPreview();
                    }
                } catch (error) {
                    console.error('Erro ao inicializar pr√©vias:', error);
                }
            }, 500);

            // Implementa√ß√£o do sistema de arrastar e soltar
            let draggedElement = null;
            let dropIndicator = document.createElement('div');
            dropIndicator.className = 'drop-indicator';
            
            // Fun√ß√£o para adicionar al√ßa de arrasto aos elementos
            function addDragHandle(element) {
                // Verificar se j√° existe uma al√ßa de arrasto
                if (element.querySelector('.drag-handle')) return;
                
                const dragHandle = document.createElement('div');
                dragHandle.className = 'drag-handle';
                dragHandle.innerHTML = '<i class="fas fa-grip-vertical"></i>';
                element.appendChild(dragHandle);
            }
            
            function makeDraggable(element) {
                // Garantir que o elemento seja arrast√°vel
                element.setAttribute('draggable', 'true');
                
                // Remover eventos anteriores para evitar duplica√ß√£o
                element.removeEventListener('dragstart', handleDragStart);
                element.removeEventListener('dragend', handleDragEnd);
                
                // Adicionar novos eventos
                element.addEventListener('dragstart', handleDragStart);
                element.addEventListener('dragend', handleDragEnd);
                
                return element;
            }
            
            function handleDragStart(e) {
                draggedElement = this;
                this.classList.add('dragging');
                
                // Definir dados para a transfer√™ncia
                e.dataTransfer.effectAllowed = 'move';
                e.dataTransfer.setData('text/html', this.outerHTML);
                
                // Criar uma imagem fantasma personalizada
                const ghostElement = this.cloneNode(true);
                ghostElement.style.width = this.offsetWidth + 'px';
                ghostElement.style.opacity = '0.5';
                document.body.appendChild(ghostElement);
                e.dataTransfer.setDragImage(ghostElement, 0, 0);
                setTimeout(() => {
                    document.body.removeChild(ghostElement);
                }, 0);
            }
            
            function handleDragEnd() {
                this.classList.remove('dragging');
                draggedElement = null;
                
                // Remover todos os indicadores de queda
                document.querySelectorAll('.drop-indicator').forEach(indicator => {
                    indicator.style.display = 'none';
                });
            }

            // Configurar a √°rea de conte√∫do para aceitar soltar
            bioContent.addEventListener('dragover', function(e) {
                e.preventDefault();
                e.dataTransfer.dropEffect = 'move';
                
                // Encontrar o elemento mais pr√≥ximo
                const closestElement = findClosestElement(e.clientY);
                
                // Posicionar o indicador de queda
                if (closestElement) {
                    const rect = closestElement.getBoundingClientRect();
                    const middle = rect.top + rect.height / 2;
                    
                    // Remover indicadores existentes
                    document.querySelectorAll('.drop-indicator').forEach(indicator => {
                        if (indicator !== dropIndicator) {
                            indicator.remove();
                        }
                    });
                    
                    // Posicionar o indicador acima ou abaixo do elemento
                    if (e.clientY < middle) {
                        // Acima do elemento
                        if (closestElement.previousElementSibling !== dropIndicator) {
                            bioContent.insertBefore(dropIndicator, closestElement);
                        }
                    } else {
                        // Abaixo do elemento
                        if (closestElement.nextElementSibling !== dropIndicator) {
                            bioContent.insertBefore(dropIndicator, closestElement.nextElementSibling);
                        }
                    }
                    
                    dropIndicator.style.display = 'block';
                }
            });
            
            bioContent.addEventListener('dragleave', function(e) {
                // Verificar se o mouse saiu da √°rea de conte√∫do
                const rect = bioContent.getBoundingClientRect();
                if (
                    e.clientX < rect.left ||
                    e.clientX > rect.right ||
                    e.clientY < rect.top ||
                    e.clientY > rect.bottom
                ) {
                    dropIndicator.style.display = 'none';
                }
            });
            
            bioContent.addEventListener('drop', function(e) {
                e.preventDefault();
                
                // Garantir que temos um elemento arrastado
                if (!draggedElement) return;
                
                // Inserir o elemento na nova posi√ß√£o
                if (dropIndicator.style.display === 'block') {
                    bioContent.insertBefore(draggedElement, dropIndicator.nextSibling);
                    
                    // Reaplicar a funcionalidade de arrastar e soltar ap√≥s o drop
                    // para garantir que o elemento continue arrast√°vel
                    makeDraggable(draggedElement);
                }
                
                // Esconder o indicador
                dropIndicator.style.display = 'none';
            });

            // Fun√ß√£o para encontrar o elemento mais pr√≥ximo do cursor
            function findClosestElement(y) {
                const blockElements = bioContent.querySelectorAll('.bio-link-wrapper, .bio-image-wrapper, .bio-text-wrapper, .bio-social-wrapper');
                let closest = null;
                let closestDistance = Infinity;
                
                blockElements.forEach(element => {
                    if (element === draggedElement || element === dropIndicator) return;
                    
                    const rect = element.getBoundingClientRect();
                    const distance = Math.min(
                        Math.abs(y - rect.top),
                        Math.abs(y - (rect.top + rect.height))
                    );
                    
                    if (distance < closestDistance) {
                        closestDistance = distance;
                        closest = element;
                    }
                });
                
                return closest;
            }
            
            // Tornar os blocos existentes arrast√°veis
            document.querySelectorAll('.bio-link-wrapper, .bio-image-wrapper, .bio-text-wrapper, .bio-social-wrapper').forEach(element => {
                addDragHandle(element);
                makeDraggable(element);
            });

            // Funcionalidade para o modal de redes sociais
            const socialForm = document.getElementById('socialForm');
            const socialStyle = document.getElementById('socialStyle');
            const socialSize = document.getElementById('socialSize');
            const socialColor = document.getElementById('socialColor');
            const customSocialColor = document.getElementById('customSocialColor');
            const socialPreview = document.getElementById('socialPreview');
            const socialIconsPreview = socialPreview ? socialPreview.querySelector('.social-icons-preview') : null;
            
            // Objeto com informa√ß√µes das redes sociais
            const socialNetworks = {
                instagram: { name: 'Instagram', icon: 'fa-instagram', color: 'linear-gradient(45deg, #405DE6, #5851DB, #833AB4, #C13584, #E1306C, #FD1D1D)' },
                facebook: { name: 'Facebook', icon: 'fa-facebook', color: '#1877F2' },
                twitter: { name: 'Twitter', icon: 'fa-twitter', color: '#1DA1F2' },
                youtube: { name: 'YouTube', icon: 'fa-youtube', color: '#FF0000' },
                tiktok: { name: 'TikTok', icon: 'fa-tiktok', color: '#000000' },
                linkedin: { name: 'LinkedIn', icon: 'fa-linkedin', color: '#0A66C2' },
                whatsapp: { name: 'WhatsApp', icon: 'fa-whatsapp', color: '#25D366' },
                telegram: { name: 'Telegram', icon: 'fa-telegram', color: '#0088cc' }
            };
            
            // Mostrar/esconder campo de URL quando checkbox √© clicado
            document.querySelectorAll('.social-network-item input[type="checkbox"]').forEach(checkbox => {
                checkbox.addEventListener('change', function() {
                    const urlInput = document.getElementById(this.value + 'Url');
                    if (urlInput) {
                        if (this.checked) {
                            urlInput.style.display = 'block';
                            urlInput.required = true;
                        } else {
                            urlInput.style.display = 'none';
                            urlInput.required = false;
                            urlInput.value = '';
                        }
                    }
                    updateSocialPreview();
                });
            });
            
            // Atualizar pr√©via quando mudar estilo, tamanho ou cor
            if (socialStyle) {
                socialStyle.addEventListener('change', updateSocialPreview);
            }
            
            if (socialSize) {
                socialSize.addEventListener('change', updateSocialPreview);
            }
            
            if (socialColor) {
                socialColor.addEventListener('change', function() {
                    if (this.value === 'custom') {
                        customSocialColor.classList.remove('hidden');
                    } else {
                        customSocialColor.classList.add('hidden');
                    }
                    updateSocialPreview();
                });
            }
            
            if (customSocialColor) {
                customSocialColor.addEventListener('input', updateSocialPreview);
            }
            
            // Fun√ß√£o para atualizar a pr√©via das redes sociais
            function updateSocialPreview() {
                if (!socialIconsPreview) return;
                
                // Limpar pr√©via atual
                socialIconsPreview.innerHTML = '';
                
                // Obter valores selecionados
                const style = socialStyle ? socialStyle.value : 'rounded';
                const size = socialSize ? socialSize.value : 'medium';
                const colorType = socialColor ? socialColor.value : 'brand';
                const customColor = customSocialColor ? customSocialColor.value : '#673AB7';
                
                // Adicionar √≠cones para cada rede social selecionada
                document.querySelectorAll('.social-network-item input[type="checkbox"]:checked').forEach(checkbox => {
                    const network = checkbox.value;
                    if (socialNetworks[network]) {
                        const icon = document.createElement('a');
                        icon.href = '#';
                        icon.className = `social-icon ${network} ${style} ${size}`;
                        icon.innerHTML = `<i class="fab ${socialNetworks[network].icon}"></i>`;
                        
                        // Aplicar cor personalizada se selecionada
                        if (colorType === 'custom') {
                            icon.style.background = customColor;
                        }
                        
                        socialIconsPreview.appendChild(icon);
                    }
                });
                
                // Mostrar mensagem se nenhuma rede social selecionada
                if (socialIconsPreview.children.length === 0) {
                    socialIconsPreview.innerHTML = '<p style="color: #666; font-style: italic;">Selecione pelo menos uma rede social</p>';
                }
            }
            
            // Submiss√£o do formul√°rio de redes sociais
            if (socialForm) {
                socialForm.addEventListener('submit', function(e) {
                    e.preventDefault();
                    
                    // Verificar se pelo menos uma rede social foi selecionada
                    const selectedNetworks = document.querySelectorAll('.social-network-item input[type="checkbox"]:checked');
                    if (selectedNetworks.length === 0) {
                        alert('Selecione pelo menos uma rede social.');
                        return;
                    }
                    
                    // Verificar se todos os URLs foram preenchidos
                    let allUrlsFilled = true;
                    selectedNetworks.forEach(checkbox => {
                        const urlInput = document.getElementById(checkbox.value + 'Url');
                        if (urlInput && !urlInput.value) {
                            allUrlsFilled = false;
                        }
                    });
                    
                    if (!allUrlsFilled) {
                        alert('Preencha todos os URLs das redes sociais selecionadas.');
                        return;
                    }
                    
                    // Obter valores selecionados
                    const style = socialStyle.value;
                    const size = socialSize.value;
                    const colorType = socialColor.value;
                    const customColor = customSocialColor.value;
                    
                    // Criar dados para o bloco
                    const socialData = {
                        networks: [],
                        style: style,
                        size: size,
                        colorType: colorType,
                        customColor: customColor
                    };
                    
                    // Adicionar dados de cada rede social selecionada
                    selectedNetworks.forEach(checkbox => {
                        const network = checkbox.value;
                        const url = document.getElementById(network + 'Url').value;
                        socialData.networks.push({
                            type: network,
                            url: url
                        });
                    });
                    
                    // Se estiver editando, atualizar o bloco existente
                    if (isEditing && currentEditingElement) {
                        console.log('Atualizando bloco de redes sociais existente');
                        
                        // Atualizar o bloco existente
                        const socialContainer = currentEditingElement.querySelector('.bio-social');
                        if (socialContainer) {
                            // Limpar o conte√∫do atual
                            socialContainer.innerHTML = '';
                            
                            // Adicionar os novos √≠cones
                            socialData.networks.forEach(network => {
                                const icon = createSocialIcon(network.type, network.url, socialData);
                                socialContainer.appendChild(icon);
                            });
                            
                            // Atualizar os dados do bloco
                            currentEditingElement._blockData = socialData;
                            
                            // Reaplicar a funcionalidade de arrastar e soltar ap√≥s a edi√ß√£o
                            makeDraggable(currentEditingElement);
                        }
                        
                        // Resetar o estado de edi√ß√£o
                        isEditing = false;
                        currentEditingElement = null;
                    } else {
                        // Criar wrapper para as redes sociais
                        const socialWrapper = document.createElement('div');
                        socialWrapper.className = 'bio-social-wrapper';
                        
                        // Criar container para os √≠cones
                        const socialContainer = document.createElement('div');
                        socialContainer.className = 'bio-social';
                        
                        // Adicionar √≠cones para cada rede social
                        socialData.networks.forEach(network => {
                            const icon = createSocialIcon(network.type, network.url, socialData);
                            socialContainer.appendChild(icon);
                        });
                        
                        // Adicionar o container ao wrapper
                        socialWrapper.appendChild(socialContainer);
                        
                        // Armazenar os dados no elemento para refer√™ncia futura
                        socialWrapper._blockData = socialData;
                        
                        // Adicionar controles de edi√ß√£o
                        const controls = createBlockControls(socialWrapper, 'social', socialData);
                        socialWrapper.appendChild(controls);
                        
                        // Adicionar al√ßa de arrasto
                        addDragHandle(socialWrapper);
                        
                        // Adicionar ao preview
                        bioContent.appendChild(socialWrapper);
                        
                        // Tornar o elemento arrast√°vel
                        makeDraggable(socialWrapper);
                    }
                    
                    // Limpar formul√°rio e fechar modal
                    this.reset();
                    
                    // Esconder todos os campos de URL
                    document.querySelectorAll('.social-url').forEach(input => {
                        input.style.display = 'none';
                        input.required = false;
                    });
                    
                    // Esconder o campo de cor personalizada
                    customSocialColor.classList.add('hidden');
                    
                    // Limpar a pr√©via
                    if (socialIconsPreview) {
                        socialIconsPreview.innerHTML = '<p style="color: #666; font-style: italic;">Selecione pelo menos uma rede social</p>';
                    }
                    
                    closeAllModals();
                });
            }
            
            // Fun√ß√£o para criar um √≠cone de rede social
            function createSocialIcon(type, url, data) {
                const icon = document.createElement('a');
                icon.href = url;
                icon.target = '_blank';
                icon.className = `social-icon ${type} ${data.style} ${data.size}`;
                icon.innerHTML = `<i class="fab ${socialNetworks[type].icon}"></i>`;
                
                // Aplicar cor personalizada se selecionada
                if (data.colorType === 'custom') {
                    icon.style.background = data.customColor;
                }
                
                return icon;
            }
            
            // Atualizar a pr√©via de redes sociais quando o modal √© aberto
            document.querySelector('.block-button:nth-child(4)').addEventListener('click', function() {
                // Resetar o formul√°rio
                if (socialForm) socialForm.reset();
                
                // Esconder todos os campos de URL
                document.querySelectorAll('.social-url').forEach(input => {
                    input.style.display = 'none';
                    input.required = false;
                });
                
                // Resetar os valores padr√£o
                if (socialStyle) socialStyle.value = 'rounded';
                if (socialSize) socialSize.value = 'medium';
                if (socialColor) socialColor.value = 'brand';
                if (customSocialColor) {
                    customSocialColor.value = '#673AB7';
                    customSocialColor.classList.add('hidden');
                }
                
                // Atualizar a pr√©via
                setTimeout(updateSocialPreview, 100);
                
                openModal('socialModal');
            });
        });
    </script>
</body>
</html> 